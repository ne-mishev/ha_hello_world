- yum: name={{ item }}
  ignore_errors: yes
  with_items:
    - binutils
    - make
    - gcc
    - gcc-c++
    - openssl
    - libssl-dev
    - python-dev
    - libffi-dev

- name: Add user {{ letsencrypt_user }}
  user:
    name: "{{ letsencrypt_user }}"
    shell: /bin/bash

- name: Install python-pip
  yum:
    name: python-pip
    state: present

- name: Update python pip
  pip:
    name: pip
    state: latest

- name: Update python requests
  pip:
    name: requests
    state: latest

- name: Update python setuptools
  pip:
    name: setuptools
    state: latest

- name: Update python six
  pip:
    name: six
    state: latest

- name: Install Letsencrypt {{ letsencrypt_version }}
  pip:
    name: certbot
    version: "{{ letsencrypt_version }}"
