- yum: name={{ item }}
  ignore_errors: yes
  with_items:
    - epel-release
    - binutils
    - make
    - gcc
    - gcc-c++
    - openssl
    - openssl-devel
    - git
    - curl
    - wget
    - tcpdump
    - python-devel
    - libffi-devel

- name: Add user {{ letsencrypt_user }}
  user:
    name: "{{ letsencrypt_user }}"
    shell: /bin/bash

- name: Install python-pip
  yum:
    name: python2-pip
    state: present

- name: Update python pip
  pip:
    name: pip
    state: latest

- name: Update python requests
  pip:
    name: requests
    state: latest

- name: Update python setuptools
  pip:
    name: setuptools
    state: latest

- name: Update python six
  pip:
    name: six
    state: latest

- name: Install Letsencrypt
- pip:
    name: git+https://github.com/greenhost/certbot-haproxy.git
